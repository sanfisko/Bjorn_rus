# Индикатор статуса WiFi автоподключения

## Описание

Визуальный индикатор на экране Bjorn, который показывает текущий статус скрипта автоматического подключения к WiFi (`wifi_auto_connect.sh`).

## Расположение индикатора

Индикатор отображается в верхней части экрана рядом с другими иконками статуса (WiFi, USB, PAN).

## Статусы и их иконки

| Статус | Иконка | Описание |
|--------|--------|----------|
| `running` | ● (черная точка) | Скрипт запущен и работает |
| `scanning` | ● с волнами | Сканирование доступных WiFi сетей |
| `connecting` | ◐ (полузаполненная точка) | Попытка подключения к сети |
| `connected` | ● с галочкой | Успешно подключено к сети |
| `failed` | ● с крестиком | Ошибка подключения |
| `waiting` | ○ (пустая точка) | Ожидание перед следующей попыткой |
| `idle` | ● (черная точка) | Ожидание следующей проверки |
| `stopped` | □ (пустой квадрат) | Скрипт остановлен |

## Файл статуса

Скрипт `wifi_auto_connect.sh` создает файл статуса `/tmp/wifi_auto_connect_status` в формате JSON:

```json
{
  "status": "connecting",
  "message": "Подключение к TestNetwork",
  "timestamp": "2025-06-02 15:30:45"
}
```

## Автоматическое обновление

Статус индикатора обновляется автоматически каждые 25 секунд вместе с другими данными дисплея.

## Тестирование

Для тестирования индикатора используйте скрипт:

```bash
python3 test_wifi_status_indicator.py
```

Этот скрипт позволяет вручную установить различные статусы и проверить отображение иконок.

## Технические детали

### Файлы, которые были изменены:

1. **wifi_auto_connect.sh** - добавлены функции обновления статуса
2. **shared.py** - добавлены переменные статуса и загрузка иконок
3. **display.py** - добавлено чтение статуса и отображение индикатора
4. **resources/images/static/** - добавлены иконки статуса

### Новые файлы:

- `wifi_auto_*.png` - иконки для различных статусов
- `create_wifi_status_icons.py` - скрипт создания иконок
- `test_wifi_status_indicator.py` - скрипт тестирования

## Устранение неполадок

### Индикатор не отображается

1. Проверьте, что иконки скопированы в `resources/images/static/`
2. Убедитесь, что скрипт `wifi_auto_connect.sh` создает файл статуса
3. Проверьте логи display.py на наличие ошибок

### Статус не обновляется

1. Проверьте, что файл `/tmp/wifi_auto_connect_status` создается и обновляется
2. Убедитесь, что процесс `wifi_auto_connect.sh` запущен
3. Проверьте права доступа к файлу статуса

### Неправильная иконка

1. Проверьте содержимое файла статуса
2. Убедитесь, что статус соответствует одному из поддерживаемых значений
3. При неизвестном статусе отображается иконка "stopped"

## Расширение функциональности

Для добавления новых статусов:

1. Создайте новую иконку в `create_wifi_status_icons.py`
2. Добавьте загрузку иконки в `shared.py`
3. Обновите словарь `status_icons` в методе `get_wifi_auto_icon()`
4. Добавьте новый статус в скрипт `wifi_auto_connect.sh`